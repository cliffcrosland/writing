syntax = "proto3";

// A page is an ordered list of page nodes. A page node has a kind and content.

message Page {
  int64 org_id = 1;
  int64 id = 2;
  string title = 3;
  int64 created_by_user_id = 4;
  int64 last_edited_by_user_id = 5;
  int64 project_owner_user_id = 6;
  int64 created_at = 7;
  int64 updated_at = 8;
}

message PageNode {
  enum Kind {
    DEFAULT = 0;
    H1 = 1;
    H2 = 2;
    H3 = 3;
    H4 = 4;
    CODE = 5;
  }

  int64 org_id = 1;
  int64 page_id = 2;
  int64 id = 3;
  PageNode.Kind kind = 4;
  string content = 5;
  double ordering = 6;
  int64 last_edited_by_user_id = 7;
}

// Updates:

message InsertPageNode {
  int64 org_id = 1;
  int64 page_id = 2;
  // Semantically, a value of -1 here means that we want to append the node to
  // the end of document.
  int64 before_page_node_id = 3;
  int64 by_user_id = 4;
  PageNode.Kind kind = 5;
  string content = 6;
}

message UpdatePageNode {
  int64 org_id = 1;
  int64 page_id = 2;
  int64 page_node_id = 3;
  int64 by_user_id = 4;
  bool kind_changed = 5;
  PageNode.Kind new_kind = 6;
  bool content_changed = 7;
  string new_content = 8;
}

message DeletePageNode {
  int64 org_id = 1;
  int64 page_id = 2;
  int64 page_node_id = 3;
  int64 by_user_id = 4;
}
